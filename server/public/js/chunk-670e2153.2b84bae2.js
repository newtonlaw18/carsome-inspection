(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-670e2153"],{"28fc":function(t,e,i){},"6a2a":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card mt-3"},[i("div",{staticClass:"card-body"},[i("p",{staticClass:"card-text m-0 font-weight-bold"},[t._v("No appointment found under this email.")])])])}],s={name:"InspectionCardEmptyState"},c=s,o=i("2877"),l=Object(o["a"])(c,a,n,!1,null,null,null);e["a"]=l.exports},"74e0":function(t,e,i){"use strict";var a=i("28fc"),n=i.n(a);n.a},a451:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card mt-3"},[i("div",{staticClass:"card-body"},[i("p",{staticClass:"card-text m-0 font-weight-bold"},[t._v(t._s(t.inspection.inspection_location+" - "+t.inspection.inspection_branch))]),i("p",{staticClass:"card-text m-0 text-info font-weight-bold"},[t._v(t._s(t.inspection.customer_name))]),i("p",{staticClass:"card-text m-0"},[i("span",{staticClass:"font-weight-bold"},[t._v("Model:")]),t._v(" "+t._s(t.inspection.brand+" - "+t.inspection.model)+" ")]),i("p",{staticClass:"card-text m-0"},[i("span",{staticClass:"font-weight-bold"},[t._v("Date:")]),t._v(" "+t._s(t.inspection.inspection_date+" - "+t.inspection.inspection_time)+" ")]),i("router-link",{staticClass:"btn btn-link text-warning pl-0 font-weight-bold",attrs:{to:{name:"RescheduleAppointment",params:{id:t.inspection._id}}}},[t._v("Reschedule")]),i("a",{staticClass:"btn btn-link text-danger pl-0 font-weight-bold",attrs:{href:"#","data-toggle":"modal","data-target":"#exampleModal"},on:{click:function(e){return e.preventDefault(),t.delete_appointment(t.inspection._id)}}},[t._v("Delete")])],1),i("div",{staticClass:"modal fade",attrs:{id:"exampleModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[i("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[i("div",{staticClass:"modal-content"},[t._m(0),i("div",{staticClass:"modal-body"},[t._v(t._s(t.notification_msg))]),t._m(1)])])])])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal-header"},[i("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("Notification")]),i("a",{staticClass:"close",attrs:{href:"#",type:"button","aria-label":"Close"}},[i("span",{attrs:{"aria-hidden":"true"}},[t._v("Ã—")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal-footer"},[i("a",{staticClass:"btn btn-secondary",attrs:{href:"/",type:"button"}},[t._v("Back to main page")])])}],s=(i("96cf"),i("1da1")),c=i("58d9"),o={name:"InspectionCard",props:["inspection"],data:function(){return{notification_msg:""}},methods:{delete_appointment:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return console.log(t),i.prev=1,i.next=4,c["a"].deleteInspection(t).then((function(t){console.log(t),e.notification_msg="Your appointment has been cancelled successfully. We hope to see you again."}),(function(t){console.log(t),e.notification_msg="Unable to remove your appointment."}));case 4:i.next=9;break;case 6:i.prev=6,i.t0=i["catch"](1),console.log(i.t0.message);case 9:case"end":return i.stop()}}),i,null,[[1,6]])})))()},reschedule_appointment:function(t){console.log(t)}}},l=o,r=i("2877"),d=Object(r["a"])(l,a,n,!1,null,null,null);e["a"]=d.exports},d16e:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid"},[i("div",{staticClass:"row align-items-center justify-content-center"},[i("div",{staticClass:"col-12 col-md-4 col-lg-4 col-xl-4 px-lg-5"},[t.update_inspection_successful?t._e():i("h1",{staticClass:"text-center mb-1"},[t._v("Welcome to Carsome!")]),t.update_inspection_successful?t._e():i("p",{staticClass:"text-muted text-center"},[t._v("Please update the form below to reschedule.")]),t.update_inspection_successful?t._e():i("div",[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12"},[i("div",{staticClass:"form-group text-left"},[i("label",{attrs:{for:"inspection_location"}},[t._v("Location")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.location_selected,expression:"location_selected"}],staticClass:"form-control",attrs:{id:"inspection_location"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.location_selected=e.target.multiple?i:i[0]}}},[i("option",[t._v("Kuala Lumpur")]),i("option",[t._v("Penang")])]),t.is_invalid_location?i("small",{staticClass:"form-text text-danger"},[t._v("Please select a location.")]):t._e()])])]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-12"},[i("div",{staticClass:"form-group text-left"},[i("label",{attrs:{for:"inspection_branch"}},[t._v("Branch")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.branch_selected,expression:"branch_selected"}],staticClass:"form-control",attrs:{id:"inspection_branch",disabled:t.branch_field_disabled},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.branch_selected=e.target.multiple?i:i[0]}}},t._l(t.branches,(function(e){return i("option",{key:e.id},[t._v(t._s(e.label))])})),0),t.is_invalid_branch?i("small",{staticClass:"form-text text-danger"},[t._v("Please select a branch.")]):t._e()])])]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-12"},[i("div",{staticClass:"form-group text-left"},[i("label",[t._v("Date")]),i("vc-date-picker",{attrs:{color:"yellow","min-date":new Date,"max-date":new Date((new Date).getTime()+18144e5),"disabled-dates":{weekdays:[1]}},model:{value:t.inspection_date,callback:function(e){t.inspection_date=e},expression:"inspection_date"}}),t.is_invalid_date?i("small",{staticClass:"form-text text-danger"},[t._v("Please enter the inspection date.")]):t._e()],1)])]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-12"},[i("div",{staticClass:"form-group text-left"},[i("label",[t._v("Time")]),i("vue-timepicker",{attrs:{format:"H:mm","minute-interval":30,"hour-range":t.hour_range,"hide-disabled-hours":"","auto-scroll":"","hide-clear-button":"",lazy:"","input-width":"100%",disabled:t.time_field_disabled},model:{value:t.inspection_time,callback:function(e){t.inspection_time=e},expression:"inspection_time"}}),t.is_invalid_time?i("small",{staticClass:"form-text text-danger"},[t._v("Please select a time for your inspection.")]):t._e(),i("small",{class:t.availability_msg_class},[t._v(t._s(t.availability_status_msg))])],1)])]),i("div",{staticClass:"row mt-1"},[i("div",{staticClass:"col-12"},[i("button",{staticClass:"btn btn-lg btn-block btn-warning",attrs:{type:"button",disabled:!t.availability_status},on:{click:function(e){return e.preventDefault(),t.reschedule_appointment(e)}}},[t._v("Reschedule")])])]),i("hr",{staticClass:"divider"}),t._m(0)]),t.update_inspection_successful?i("div",[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12"},[i("h1",{staticClass:"text-center mb-1"},[t._v("It's a YES!")]),t._m(1),i("a",{staticClass:"btn btn-lg btn-block btn-warning",attrs:{href:"#",type:"button"},on:{click:function(e){return e.preventDefault(),t.add_to_calendar(e)}}},[t._v("Add appointment to my calendar")])])]),i("hr",{staticClass:"divider"}),t._m(2)]):t._e()]),t._m(3)])])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 text-center"},[i("a",{staticClass:"btn btn-link text-secondary",attrs:{type:"button",href:"/"}},[t._v("Back to main page")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"text-dark text-center"},[t._v(" Woo! Your appointment has been "),i("span",{staticClass:"text-success"},[t._v("rescheduled")]),t._v("! You will receive the confirmation email shortly. ")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 text-center text-dark"},[i("a",{attrs:{href:"/"}},[t._v("Back to home page")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-12 col-md-8 col-lg-8 col-xl-8 d-none d-lg-block pr-lg-0"},[i("div",{staticClass:"bg-cover vh-100",staticStyle:{"background-size":"cover","background-repeat":"no-repeat","background-position":"center","background-image":"url(https://images.unsplash.com/photo-1568605117036-5fe5e7bab0b7?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80)"}})])}],s=(i("4de4"),i("caad"),i("d3b7"),i("ac1f"),i("25f0"),i("1276"),i("96cf"),i("1da1")),c=i("7bec"),o=i.n(c),l=i("97fc"),r=i.n(l),d=i("58d9"),_=i("a451"),u=i("6a2a"),p={name:"RescheduleAppointment",components:{VuePhoneNumberInput:o.a,VueTimepicker:r.a,InspectionCard:_["a"],InspectionCardEmptyState:u["a"]},data:function(){return{branches:null,branch_field_disabled:!0,location_selected:"",branch_selected:"",inspection_date:"",inspection_time:"9:00",hour_range:[9,10,11,12,13,14,15,16,17],inspections:[],availability_status:!1,availability_status_msg:"",availability_msg_class:"",is_invalid_location:!1,is_invalid_branch:!1,is_invalid_date:!1,is_invalid_time:!1,show_next_page:!1,update_inspection_successful:!1,time_field_disabled:!1}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d["a"].getInspectionsByID(t.$route.params.id);case 3:t.inspections=e.sent,t.location_selected=t.inspections[0].inspection_location,t.branch_selected=t.inspections[0].inspection_branch,t.inspection_date=new Date(t.inspections[0].inspection_date),t.inspection_time=t.inspections[0].inspection_time,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},watch:{location_selected:function(t){"Kuala Lumpur"===t&&(this.branches=[{id:1,label:"Ampang"},{id:2,label:"Puchong"},{id:3,label:"Kelana Jaya"}],this.branch_field_disabled=!1),"Penang"===t&&(this.branches=[{id:4,label:"Perai"}],this.branch_field_disabled=!1),this.check_schedule()},branch_selected:function(t){""!==t&&(this.date_field_disabled=!1,this.check_schedule())},inspection_date:function(t){""!==t&&(this.time_field_disabled=!1),this.update_hour_range(t),this.check_schedule()},inspection_time:function(t){this.check_schedule()}},methods:{validate_field:function(t){return"location"===t?""===this.location_selected||void 0===this.location_selected?(this.is_invalid_location=!0,!1):(this.is_invalid_location=!1,!0):"branch"===t?""===this.branch_selected?(this.is_invalid_branch=!0,!1):(this.is_invalid_branch=!1,!0):"date"===t?""===this.inspection_date?(this.is_invalid_date=!0,!1):(this.is_invalid_date=!1,!0):"time"===t?""===this.inspection_time?(this.is_invalid_time=!0,!1):(this.is_invalid_time=!1,!0):void 0},add_to_calendar:function(){var t=new Date(this.inspection_date.getFullYear(),this.inspection_date.getMonth(),this.inspection_date.getDate(),parseInt(this.inspection_time.split(":")[0]),parseInt(this.inspection_time.split(":")[1]),0,0),e=new Date(this.inspection_date.getFullYear(),this.inspection_date.getMonth(),this.inspection_date.getDate(),parseInt(this.inspection_time.split(":")[0]),parseInt(this.inspection_time.split(":")[1])+30,0,0);this.$ics.addEvent("en-us","Carsome Inspection Appointment","Carsome Inspection Appointment",this.location_selected+" - "+this.branch_selected,t,e,"https://carsome.my"),this.$ics.download("Carsome Inspection Appointment")},update_hour_range:function(t){var e=(new Date).toDateString();if(t.toDateString()===e){for(var i=(new Date).getHours(),a=[],n=9;n<i+1;n++)a.push(n);this.hour_range=this.hour_range.filter((function(t){return!a.includes(t)})),""===this.inspection_time&&(this.inspection_time=this.hour_range[0].toString()+":00"),i>17&&(this.time_field_disabled=!0)}else this.hour_range=[9,10,11,12,13,14,15,16,17],""===this.inspection_time&&(this.inspection_time="9:00")},reschedule_appointment:function(){var t=this.validate_field("location"),e=this.validate_field("branch"),i=this.validate_field("date"),a=this.validate_field("time");!0===t&&!0===e&&!0===i&&!0===a&&!0===this.availability_status&&this.update_inspection()},update_inspection:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={inspection_location:t.location_selected,inspection_branch:t.branch_selected,inspection_date:t.inspection_date.toLocaleDateString(),inspection_time:t.inspection_time,updatedAt:new Date},e.next=3,d["a"].updateInspection(t.$route.params.id,i).then((function(e){t.show_next_page=!1,t.update_inspection_successful=!0,console.log("update successful")}),(function(t){console.log(t)}));case 3:case"end":return e.stop()}}),e)})))()},check_schedule:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var i,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=0,a=2,n="",6===i&&(a=4),""!==t.branch_selected&&void 0!==t.branch_selected&&(n+="&inspection_branch="+t.branch_selected),""!==t.inspection_date&&(i=t.inspection_date.getDay(),n+="&inspection_date="+t.inspection_date.toLocaleDateString()),""!==t.inspection_time&&(n+="&inspection_time="+t.inspection_time),""===t.branch_selected||""===t.inspection_date||""===t.inspection_time){e.next=18;break}return e.prev=8,e.next=11,d["a"].getInspections(n);case 11:s=e.sent,s.length>=a?(t.availability_msg_class="form-text text-danger",t.availability_status_msg="This slot is currently full. Please choose another time/date.",t.availability_status=!1):(t.availability_msg_class="form-text text-success",t.availability_status_msg="This slot is available. :) ",t.availability_status=!0),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](8),console.log(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[8,15]])})))()}}},h=p,m=(i("74e0"),i("2877")),v=Object(m["a"])(h,a,n,!1,null,"bce579c8",null);e["default"]=v.exports}}]);
//# sourceMappingURL=chunk-670e2153.2b84bae2.js.map